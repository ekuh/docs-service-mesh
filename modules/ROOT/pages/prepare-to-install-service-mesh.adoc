= Prerequisites for Downloading and Installing Anypoint Service Mesh
ifndef::env-site,env-github[]
include::_attributes.adoc[]
endif::[]
:keywords: service mesh, microservices, installation prerequisites

image::prepare-to-install-breadcrumb.png[]

Before you download and install Anypoint Service Mesh, ensure that you review and fulfill the software, licensing, and permissions and roles requirements. 

== Audience Requirements

Anypoint Service Mesh is developed using Istio and Kubernetes. Therefore, you must have a working knowledge of Istio and Kubernetes to install and use Anypoint Service Mesh.


== Software Requirements

Your Anypoint Service Mesh installation requires the following applications and Kubernetes environments:


* One of the following environments on which to run Kubernetes:
** Google Kubernetes Engine (GKE)
** Amazon EKS
** Azure Kubernetes Service (AKS)
* https://istio.io/docs/setup[Install Istio] 1.4.4, 1.4.5, or 1.4.6 in your cluster with the following configurations: 
. Enable policy control by configuring the flag:
** `--set values.global.disablePolicyChecks=false`
+
For more information, see https://archive.istio.io/v1.4/docs/tasks/policy-enforcement/enabling-policy/[Policy Enforcement]. To configure other versions of Istio, contact your MuleSoft representative.
. Enable API Analytics by setting the `disableMixerHttpReports` flag to *false*: 
+
`kubectl -n istio-system get cm istio -o yaml | sed -e 's/disableMixerHttpReports: true/disableMixerHttpReports: false/g' | kubectl replace -f -`


== Hardware Requirements

Your Anypoint Service Mesh installation requires the following hardware configuration at a minimum:

* CPU: 4 cores
* Memory: 8 GBs


== Production Licensing and Trial Licensing Requirements

You require an Anypoint Service Mesh license to perform the installation in your production environment. The license that you obtain must contain the following entitlements:

* API Gateway: api-gateway
* Cluster: clustering

For evaluation purposes, you can request a trial version of Anypoint Service Mesh. The trial version limits the use of the product and is best suited for only exploring and learning the product. The trial version is not recommended for production use.

To obtain a trial or regular license key, contact your MuleSoft account representative or the MuleSoft sales team. 


== Permissions and Roles Requirements

Before you can use Anypoint Service Mesh, you must have the following roles and permissions:
 
* API Manager Environment Administrator permission or Organization Administrator role for your organization, to access the client ID and client secret credentials
* Client ID and client secret credentials from Access Management: 
** If you provision the adapter with organization credentials, you are able to manage APIS on the specific adapter of that organization. 
** If you specify environment credentials, you can manage APIs of only that environment. MuleSoft recommends that you use the environment credentials instead of the organization credentials. 
+
For more information about which permissions to use, see xref:api-manager::org-credentials-config-mule4.adoc#obtaining-credentials[obtaining credentials].
* Cluster-admin role access to the Kubernetes cluster

== Ports, IPs and Hostnames Whitelist Requirements

In your network, you might need to whitelist the hostnames and ports of external resources to allow Anypoint Service Mesh to communicate with the MuleSoft-managed online Anypoint Platform APIs and services.

[%header%autowidth.spread,cols="3+a"]
|===
|Plane |Host |Port
|*US*|*anypoint.mulesoft.com* | 443
|*US*|*analytics-ingest.anypoint.mulesoft.com* |  443
|*US*|**.dkr.ecr.us-east-1.amazonaws.com* |  443
|*US*|*exchange-files.anypoint.mulesoft.com* |  443
|*US*|*exchange2-asset-manager-kprod.s3.amazonaws.com* |  443
|*EU*|*eu1.anypoint.mulesoft.com* | 443
|*EU*|*analytics-ingest.eu1.anypoint.mulesoft.com* |  443
|*EU*|**.dkr.ecr.eu-central-1.amazonaws.com* |  443
|*EU*|*exchange-files.eu1.anypoint.mulesoft.com* |  443
|*EU*|*exchange2-asset-manager-kprod-eu.s3.eu-central-1.amazonaws.com* |  443
|*ALL*|*get.helm.sh* | 443
|*ALL*|*storage.googleapis.com* | 443
|===

== Configuring Your Environment Variable on Linux Systems

Before you begin installing Anypoint Service Mesh, update your `PATH` environment variable to store system-wide values, such as the directories to search for the executable programs.

To configure your `PATH` variable on Linux: 

. Open the `.bashrc` file in your home directory.
+
For example, type `cd /home/_your-user-name_/.bashrc`) in a text editor.
. Add the following command to the last line of the file:
+
`export PATH=_your-dir:$PATH_`, where _your-dir_ is the directory you want to add.
. Save the `.bashrc` file.
. Restart your terminal.



== See Also

* https://istio.io/docs/setup/[Istio Documentation]


